<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DEMON PENGU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-black text-white font-sans">

  <!-- Botón flotante de conexión Phantom -->
  <div id="phantom-connect-wrapper" class="fixed top-4 right-4 z-50">
    <button id="phantom-connect"
            class="bg-gradient-to-r from-purple-700 via-indigo-500 to-blue-500 hover:from-purple-800 hover:to-blue-600
                   text-white font-semibold px-5 py-2 rounded-full shadow-lg shadow-indigo-900/30 transition duration-300">
      🔗 Conectar Wallet
    </button>
    <p id="phantom-status" class="text-sm text-green-400 mt-1 text-right"></p>
  </div>

  <!-- Contenido principal -->
  <div class="max-w-3xl mx-auto p-6 text-center pt-20">
    
    <img src="demonpengu-logo.png" alt="Demon Pengu Logo" class="w-48 mx-auto mb-6" />

    <h1 class="text-5xl font-extrabold text-red-600">DEMON PENGU</h1>
    <p class="text-xl text-gray-300 mt-2">Ticker: <span class="font-mono text-red-400">DEMONPENGU</span></p>

    <p class="mt-4 text-lg text-gray-400 italic">
      In the cursed reaches of the Infernal Pole—where fire burns beneath black snow and the sky roars with blood-red auroras—lives a damned species: the Demon Penguins. They weren’t always like this.
    </p>

    <!-- Mint y Precio -->
    <div class="mt-6 p-4 bg-gray-800 rounded-lg text-left text-sm">
      <p><strong>🎯 Mint Address:</strong><br />
        <span class="break-words text-gray-200">BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM</span>
      </p>
      <p class="mt-2"><strong>💰 Precio actual:</strong> <span id="live-price" class="text-green-400">$0.00</span></p>
    </div>

    <!-- Botón comprar -->
    <a href="https://pump.fun/coin/BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM"
       target="_blank"
       class="mt-6 inline-block bg-red-600 hover:bg-red-700 text-white font-bold px-6 py-3 rounded-full transition">
      🔥 Comprar en Pump.fun
    </a>
<!-- Swap Integrado -->
<div class="mt-10 bg-gray-800 p-4 rounded-lg">
  <h2 class="text-lg font-bold text-green-300 mb-4">🔄 Intercambiar DEMONPENGU</h2>
  <iframe
    src="https://jup.ag/swap?inputMint=BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM&outputMint=So11111111111111111111111111111111111111112"
    width="100%"
    height="600"
    style="border: none; border-radius: 12px; overflow: hidden;"
    allow="clipboard-read; clipboard-write; web-share"
    sandbox="allow-scripts allow-same-origin allow-popups allow-forms">
  </iframe>
</div>

    <!-- Balance -->
    <p id="pengu-balance" class="mt-4 text-green-300 text-sm"></p>

    <!-- Redes -->
    <div class="mt-8 flex justify-center space-x-6">
      <a href="https://x.com/ElonBeastToken" target="_blank" class="text-blue-400 hover:text-blue-500">Twitter / X</a>
    </div>

    <!-- Gráfico -->


  <!-- Airdrop -->
 <!-- <div class="mt-10">
    <button id="claim-airdrop"
            class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold px-6 py-2 rounded-full transition">
      🎁 Reclamar Airdrop
    </button>
    <p id="airdrop-status" class="mt-2 text-sm text-green-400"></p>
  </div> -->

  <!-- Staking -->
  <div class="mt-10 bg-gray-800 rounded-lg p-4">
    <h2 class="text-lg font-bold mb-2 text-purple-300">⛓️ Staking DEMONPENGU</h2>
    <input type="number" id="stake-amount" placeholder="Cantidad" class="p-2 rounded text-black w-1/2" />
    <button id="stake-btn" class="ml-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded text-white">
      Stakear
    </button>
    <p id="stake-status" class="mt-2 text-sm text-green-400"></p>
  </div>

  <!-- Footer -->
  <footer class="mt-10 text-sm text-gray-500 text-center">
    &copy; 2025 Demon Pengu. All rights cursed.
  </footer>

  <!-- Scripts -->
  <script>
    const TOKEN_MINT = "BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM";

    const phantomBtn = document.getElementById("phantom-connect");
    const phantomStatus = document.getElementById("phantom-status");
    const penguBalance = document.getElementById("pengu-balance");
    const livePrice = document.getElementById("live-price");

    let connectedPubkey = null;

    async function loadPrice() {
      try {
        livePrice.textContent = "⏳ Cargando precio...";
        const res = await fetch("https://api.geckoterminal.com/api/v2/networks/solana/tokens/" + TOKEN_MINT);
        const data = await res.json();
        const price = data.data.attributes.price_usd;
        livePrice.textContent = `$${parseFloat(price).toFixed(6)}`;
      } catch (error) {
        console.error("Error al obtener el precio:", error);
        livePrice.textContent = "N/A";
      }
    }

    async function getTokenBalance(pubkey) {
      try {
        penguBalance.textContent = "⏳ Cargando balance...";
        const res = await fetch(`https://api.mainnet-beta.solana.com`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            jsonrpc: "2.0",
            id: 1,
            method: "getTokenAccountsByOwner",
            params: [
              pubkey,
              { mint: TOKEN_MINT },
              { encoding: "jsonParsed" }
            ]
          })
        });
        const data = await res.json();
        const account = data.result.value[0];
        const amount = account?.account.data.parsed.info.tokenAmount.uiAmount || 0;
        penguBalance.textContent = `🐧 Balance: ${amount} DEMONPENGU`;
      } catch (err) {
        console.error("No se pudo obtener el balance:", err);
        penguBalance.textContent = "❌ Error al cargar balance";
      }
    }

    async function connectPhantom() {
      if (!window.solana || !window.solana.isPhantom) {
        alert("Phantom Wallet no está instalada. Instálala desde https://phantom.app/");
        return;
      }

      phantomBtn.disabled = true;
      phantomBtn.textContent = "⏳ Conectando...";

      try {
        const res = await window.solana.connect();
        connectedPubkey = res.publicKey.toString();
        phantomBtn.textContent = "✅ Conectado (click para desconectar)";
        phantomBtn.disabled = false;
        phantomStatus.textContent = connectedPubkey.slice(0, 4) + "..." + connectedPubkey.slice(-4);
        await getTokenBalance(connectedPubkey);
      } catch (err) {
        console.error("Usuario canceló conexión:", err);
        phantomBtn.textContent = "🔗 Conectar Wallet";
        phantomBtn.disabled = false;
        phantomStatus.textContent = "";
        penguBalance.textContent = "";
      }
    }

    async function disconnectPhantom() {
      if (!window.solana || !window.solana.isPhantom) return;

      try {
        await window.solana.disconnect();
      } catch (err) {
        console.warn("Error al desconectar:", err);
      }

      connectedPubkey = null;
      phantomBtn.textContent = "🔗 Conectar Wallet";
      phantomStatus.textContent = "";
      penguBalance.textContent = "";
    }

    phantomBtn.addEventListener("click", async () => {
      if (connectedPubkey) {
        // Si ya está conectado, al hacer click desconectamos
        await disconnectPhantom();
      } else {
        await connectPhantom();
      }
    });

    // Manejar cambio de cuenta o desconexión desde Phantom Wallet
    if (window.solana && window.solana.isPhantom) {
      window.solana.on("accountChanged", async (publicKey) => {
        if (publicKey) {
          connectedPubkey = publicKey.toString();
          phantomBtn.textContent = "✅ Conectado (click para desconectar)";
          phantomStatus.textContent = connectedPubkey.slice(0, 4) + "..." + connectedPubkey.slice(-4);
          await getTokenBalance(connectedPubkey);
        } else {
          // wallet desconectada o sin cuenta seleccionada
          connectedPubkey = null;
          phantomBtn.textContent = "🔗 Conectar Wallet";
          phantomStatus.textContent = "";
          penguBalance.textContent = "";
        }
      });
    }

    window.addEventListener("load", async () => {
      loadPrice();
      setInterval(loadPrice, 15000);

      if (window.solana && window.solana.isPhantom) {
        try {
          const res = await window.solana.connect({ onlyIfTrusted: true });
          connectedPubkey = res.publicKey.toString();
          phantomBtn.textContent = "✅ Conectado (click para desconectar)";
          phantomStatus.textContent = connectedPubkey.slice(0, 4) + "..." + connectedPubkey.slice(-4);
          await getTokenBalance(connectedPubkey);
        } catch (_) {
          phantomBtn.textContent = "🔗 Conectar Wallet";
          phantomStatus.textContent = "";
          penguBalance.textContent = "";
          connectedPubkey = null;
        }
      } else {
        phantomBtn.textContent = "⚠️ Phantom no detectado";
        phantomBtn.disabled = true;
        phantomStatus.textContent = "Por favor instala Phantom Wallet.";
      }
    });

    // Airdrop simulado
    const claimBtn = document.getElementById("claim-airdrop");
    const airdropStatus = document.getElementById("airdrop-status");

    claimBtn.addEventListener("click", () => {
      if (!window.solana?.publicKey) {
        alert("Conecta tu wallet primero.");
        return;
      }

      claimBtn.disabled = true;
      claimBtn.textContent = "🎁 Reclamando...";

      setTimeout(() => {
        airdropStatus.textContent = "✅ Airdrop simulado (haz el real en backend luego)";
        claimBtn.textContent = "🎁 Reclamado";
      }, 2000);
    });

    // Staking simulado
    const stakeBtn = document.getElementById("stake-btn");
    const stakeAmount = document.getElementById("stake-amount");
    const stakeStatus = document.getElementById("stake-status");

    stakeBtn.addEventListener("click", () => {
      const amount = parseFloat(stakeAmount.value);
      if (!amount || amount <= 0) {
        stakeStatus.textContent = "❌ Ingresa una cantidad válida.";
        return;
      }

      if (!window.solana?.publicKey) {
        stakeStatus.textContent = "❌ Conecta tu wallet.";
        return;
      }

      stakeStatus.textContent = "⏳ Stake simulado: " + amount + " DEMONPENGU";
      setTimeout(() => {
        stakeStatus.textContent = `✅ ¡Stake exitoso de ${amount} DEMONPENGU! (simulado)`;
      }, 2000);
    });
  </script>

</body>
</html>




