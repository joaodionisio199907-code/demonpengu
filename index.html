<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <title>DEMON PENGU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-black text-white font-sans min-h-screen flex flex-col">

  <!-- Navbar -->
  <nav class="bg-gray-900 bg-opacity-90 backdrop-blur-md fixed w-full top-0 left-0 z-50 shadow-lg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-16">
      <!-- Logo -->
      <a href="#" class="flex items-center space-x-2">
        <img src="demonpengu-logo.png" alt="Demon Pengu Logo" class="w-12 h-12 rounded-lg" />
        <span class="text-red-600 font-extrabold text-xl select-none">DEMON PENGU</span>
      </a>

      <!-- Menu desktop -->
      <div class="hidden md:flex space-x-8 text-gray-300 font-semibold select-none">
        <a href="#buy" class="hover:text-red-600 transition">Comprar</a>
        <a href="#staking" class="hover:text-red-600 transition">Staking</a>
        <a href="#grafico" class="hover:text-red-600 transition">Gráfico</a>
        <a href="https://pump.fun/coin/BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM" target="_blank" class="hover:text-red-600 transition">Pump.fun</a>
      </div>

      <!-- Hamburger menu button -->
      <button id="menu-btn" class="md:hidden focus:outline-none">
        <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" viewBox="0 0 24 24">
          <path d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Mobile menu -->
    <div id="mobile-menu" class="hidden bg-gray-800 bg-opacity-95 px-4 pt-4 pb-6 space-y-3 md:hidden text-center font-semibold">
      <a href="#buy" class="block hover:text-red-600 transition">Comprar</a>
      <a href="#staking" class="block hover:text-red-600 transition">Staking</a>
      <a href="#grafico" class="block hover:text-red-600 transition">Gráfico</a>
      <a href="https://pump.fun/coin/BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM" target="_blank" class="block hover:text-red-600 transition">Pump.fun</a>
    </div>
  </nav>

  <!-- Main content wrapper to offset navbar -->
  <main class="flex-grow pt-20 max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- Wallet connect button top-right fixed -->
    <div id="phantom-connect-wrapper" class="fixed top-4 right-4 z-50">
      <button id="phantom-connect"
              class="bg-gradient-to-r from-purple-700 via-indigo-500 to-blue-500 hover:from-purple-800 hover:to-blue-600
                     text-white font-semibold px-5 py-2 rounded-full shadow-lg shadow-indigo-900/30 transition duration-300">
        🔗 Conectar Wallet
      </button>
      <p id="phantom-status" class="text-sm text-green-400 mt-1 text-right"></p>
    </div>

    <!-- Info principal -->
    <section class="text-center mb-8">
      <h1 class="text-5xl font-extrabold text-red-600 select-none">DEMON PENGU</h1>
      <p class="text-xl text-gray-300 mt-2 select-none">Ticker: <span class="font-mono text-red-400">DEMONPENGU</span></p>

      <p class="mt-4 text-lg text-gray-400 italic max-w-xl mx-auto select-none">
        In the cursed reaches of the Infernal Pole—where fire burns beneath black snow and the sky roars with blood-red auroras—lives a damned species: the Demon Penguins. They weren’t always like this.
      </p>
    </section>

    <!-- Mint y Precio -->
    <section id="buy" class="mt-6 p-4 bg-gray-800 rounded-lg text-left text-sm select-none">
      <p><strong>🎯 Mint Address:</strong><br />
        <span class="break-words text-gray-200 select-text">BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM</span>
      </p>
      <p class="mt-2"><strong>💰 Precio actual:</strong> <span id="live-price" class="text-green-400">$0.00</span></p>
    </section>

    <!-- Botón comprar -->
    <div class="mt-6 text-center">
      <a href="https://pump.fun/coin/BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM"
         target="_blank"
         class="inline-block bg-red-600 hover:bg-red-700 text-white font-bold px-6 py-3 rounded-full transition select-none">
        🔥 Comprar en Pump.fun
      </a>
    </div>

    <!-- Balance -->
    <p id="pengu-balance" class="mt-4 text-green-300 text-sm select-none"></p>

    <!-- Redes -->
    <div class="mt-8 flex justify-center space-x-6 select-none">
      <a href="https://x.com/ElonBeastToken" target="_blank" class="text-blue-400 hover:text-blue-500">Twitter / X</a>
    </div>

    <!-- Staking -->
   

    <!-- Gráfico -->
    <section id="grafico" class="mt-10 bg-gray-800 p-6 rounded-lg select-none">
      <h2 class="text-lg font-bold mb-4 text-purple-300">📈 Gráfico Demon Pengu</h2>
      <canvas id="penguChart" height="100"></canvas>
    </section>

  </main>

  <!-- GraficoSwap -->
  <div id="swap" class="mt-10 bg-gray-800 p-4 rounded-lg">
      <h2 class="text-lg font-bold text-green-300 mb-4">🔄 Intercambiar DEMONPENGU</h2>
      <iframe
        src="https://jup.ag/swap?inputMint=BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM&outputMint=So11111111111111111111111111111111111111112"
        width="100%"
        height="600"
        style="border: none; border-radius: 12px; overflow: hidden;"
        allow="clipboard-read; clipboard-write; web-share"
        sandbox="allow-scripts allow-same-origin allow-popups allow-forms">
      </iframe>
    </div>
  <!-- Footer -->
  <footer class="mt-10 mb-6 text-sm text-gray-500 text-center select-none">
    &copy; 2025 Demon Pengu. All rights cursed.
  </footer>

  <!-- Scripts -->
  <script>
    const TOKEN_MINT = "BcLUjirP15KdJH9G2Lo3bYcsAirvaYr5dffgcQxmM8SM";

    // Phantom Wallet connection
    const phantomBtn = document.getElementById("phantom-connect");
    const phantomStatus = document.getElementById("phantom-status");
    const penguBalance = document.getElementById("pengu-balance");
    const livePrice = document.getElementById("live-price");

    let connectedPubkey = null;

    async function loadPrice() {
      try {
        livePrice.textContent = "⏳ Cargando precio...";
        const res = await fetch("https://api.geckoterminal.com/api/v2/networks/solana/tokens/" + TOKEN_MINT);
        const data = await res.json();
        const price = data.data.attributes.price_usd;
        livePrice.textContent = `$${parseFloat(price).toFixed(6)}`;
      } catch (error) {
        console.error("Error al obtener el precio:", error);
        livePrice.textContent = "N/A";
      }
    }

    async function getTokenBalance(pubkey) {
      try {
        penguBalance.textContent = "⏳ Cargando balance...";
        const res = await fetch(`https://api.mainnet-beta.solana.com`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            jsonrpc: "2.0",
            id: 1,
            method: "getTokenAccountsByOwner",
            params: [
              pubkey,
              { mint: TOKEN_MINT },
              { encoding: "jsonParsed" }
            ]
          })
        });
        const data = await res.json();
        const account = data.result.value[0];
        const amount = account?.account.data.parsed.info.tokenAmount.uiAmount || 0;
        penguBalance.textContent = `🐧 Balance: ${amount} DEMONPENGU`;
      } catch (err) {
        console.error("No se pudo obtener el balance:", err);
        penguBalance.textContent = "❌ Error al cargar balance";
      }
    }

    async function connectPhantom() {
      if (!window.solana || !window.solana.isPhantom) {
        alert("Phantom Wallet no está instalada. Instálala desde https://phantom.app/");
        return;
      }

      phantomBtn.disabled = true;
      phantomBtn.textContent = "⏳ Conectando...";

      try {
        const res = await window.solana.connect();
        connectedPubkey = res.publicKey.toString();
        phantomBtn.textContent = "✅ Conectado (click para desconectar)";
        phantomBtn.disabled = false;
        phantomStatus.textContent = connectedPubkey.slice(0, 4) + "..." + connectedPubkey.slice(-4);
        await getTokenBalance(connectedPubkey);
      } catch (err) {
        console.error("Usuario canceló conexión:", err);
        phantomBtn.textContent = "🔗 Conectar Wallet";
        phantomBtn.disabled = false;
        phantomStatus.textContent = "";
        penguBalance.textContent = "";
      }
    }

    async function disconnectPhantom() {
      if (!window.solana || !window.solana.isPhantom) return;

      try {
        await window.solana.disconnect();
      } catch (err) {
        console.warn("Error al desconectar:", err);
      }

      connectedPubkey = null;
      phantomBtn.textContent = "🔗 Conectar Wallet";
      phantomStatus.textContent = "";
      penguBalance.textContent = "";
    }

    phantomBtn.addEventListener("click", async () => {
      if (connectedPubkey) {
        await disconnectPhantom();
      } else {
        await connectPhantom();
      }
    });

    // Manejar cambio de cuenta o desconexión desde Phantom Wallet
    if (window.solana && window.solana.isPhantom) {
      window.solana.on("accountChanged", async (publicKey) => {
        if (publicKey) {
          connectedPubkey = publicKey.toString();
          phantomBtn.textContent = "✅ Conectado (click para desconectar)";
          phantomStatus.textContent = connectedPubkey.slice(0, 4) + "..." + connectedPubkey.slice(-4);
          await getTokenBalance(connectedPubkey);
        } else {
          await disconnectPhantom();
        }
      });
    }

    // Cargar precio en load
    window.addEventListener("load", () => {
      loadPrice();
      crearGraficoRealista();
    });

    // Menu hamburguesa mobile
    const menuBtn = document.getElementById("menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");

    menuBtn.addEventListener("click", () => {
      if (mobileMenu.classList.contains("hidden")) {
        mobileMenu.classList.remove("hidden");
      } else {
        mobileMenu.classList.add("hidden");
      }
    });

    // Función para crear gráfico escalera estilo Demon Pengu
    async function crearGraficoRealista() {
      // Obtener precio actual real
      let precioActual = 0.0005; // fallback si falla

      try {
        const res = await fetch(`https://api.geckoterminal.com/api/v2/networks/solana/tokens/${TOKEN_MINT}`);
        const data = await res.json();
        precioActual = parseFloat(data.data.attributes.price_usd);
      } catch {
        console.warn("No se pudo obtener el precio real, usando fallback");
      }

      // Generar datos simulados tipo escalera suave
      const variaciones = [0, 0.5, -0.3, 1, -0.2, 1.5, -2]; // % variación relativa
      let datos = [];
      let base = precioActual;

      for (let i = 0; i < variaciones.length; i++) {
        const variacionFactor = 1 + variaciones[i] / 100;
        base = base * variacionFactor;
        datos.push(parseFloat(base.toFixed(6)));
      }

      const ctx = document.getElementById("penguChart").getContext("2d");

      if(window.penguChartInstance) {
        window.penguChartInstance.destroy();
      }

      window.penguChartInstance = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ["Inicio", "Pump", "Dump", "Recovery", "Lunares", "Infernal Rise", "Caída Final"],
          datasets: [{
            label: "Precio DEMONPENGU (simulado realista)",
            data: datos,
            borderColor: "red",
            backgroundColor: "rgba(255,0,0,0.15)",
            stepped: true,
            borderWidth: 3,
            fill: true,
            tension: 0.1
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { labels: { color: "#fff" } } },
          scales: {
            x: { ticks: { color: "#ccc" }, grid: { color: "#444" } },
            y: { 
              beginAtZero: false,
              ticks: { color: "#ccc" },
              grid: { color: "#444" }
            }
          }
        }
      });
    }
  </script>
</body>
</html>





